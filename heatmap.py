# 各个词与方面词之间的相关性得分

import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
from matplotlib.backends.backend_pdf import PdfPages
import matplotlib as mpl

mpl.rcParams['figure.subplot.top'] = 0.50
mpl.rcParams['figure.subplot.bottom'] = 0.44
mpl.rcParams['figure.subplot.left'] = 0.01
mpl.rcParams['figure.subplot.right'] = 0.995

#plt.rcParams["font.family"] = "Times New Roman"
plt.rcParams["font.family"] = "DejaVu Sans"
#sns.set(font="Times New Roman")

def store_heat(df_data, save_dir):
    fig, ax = plt.subplots(figsize=(10,20))
    cmap = sns.light_palette((260, 75, 60), input="husl")
    sns.heatmap(df_data, annot=True, linewidths=.5, ax=ax, yticklabels=True, cmap=cmap, cbar=False) # annot显示数据\
    plt.savefig(save_dir, bbox_inches='tight')
    plt.close()

#一个使用例子，df_data为DataFrame类型的数据，列名（columns需设置为对应显示的字符串）
#path为保存路径
# df_data = pd.DataFrame([[0.211079491893512, 0.15495145845407637, 0.20774342826457778, 0.42599948790355846, 0.18637215614613584, 0.7699411449202395, 0.2410692465387192, 0.5193177575044197, 1.0, 0.26908530253983787, 0.26385087160798687, 0.921529305614449, 0.12745411350557215]],columns=["All","of","the","apetizers","are","good","and","the","Sangria","is","very","good","."])

# laptop
df_data = pd.DataFrame(
    [[0.10941303966872566, 0.06675137227277891, 0.26513577533736316, 0.14250403912046036, 0.2665980937330909, 0.1795020334053944, 0.09009606477992979, 1.0, 0.14969216971003502, 0.04275923216208743, 0.005418159672907555],
     [0.4905776985968751, 0.8475043527496933, 1.0, 0.47535415957181026, 0.4824968053745386, 0.49437198126052695, 0.4590516149104332, 0.47739929272349263, 0.44845538798156837, 0.39890764659411126, 0.4781852522962833],
     [0.3586615390659111, 1.0, 0.39603833231349644, 0.14862131165751924, 0.3083891498224438, 0.25585973986195415, 0.3535839764434099, 0.37299910747256404, 0.0928281718052716, 0.3426310370982561, 0.1458519615582159]],
    columns=["Did", "not", "enjoy", "the", "new", "Windows", "8", "and", "touchscreen", "functions", "."],
    index=["IAN", "CDT", "SSDGCN"])
# [0.14193942259676576, 1.0, 0.5496799779475748, 0.17313793816413783, 0.13409554621890515, 0.46635732978844074, 0.3405838967183299, 0.08529511866606143, 0.07996303332390998, 0.0880116776741383, 0.03213557953491594]
# rest
# df_data = pd.DataFrame([[0.087, 0.093, 0.61, 0.37, 1, 0.58, 0.44, 0.25],
#                         [0.43, 0.38, 0.29, 0.035, 0.15, 0.31, 1, 0.22],
#                         [1.0, 0.9574412895321494, 0.03889686737982833, 0.025466116472337274, 0.06203616128637447, 0.032924724964377775, 0.04673269193699222, 0.027164439838735604]],
#                        columns=["Great", "food", "but", "the", "service", "was", "dreadful", "!"],
#                        index=["IAN", "CDT", "SSDGCN"])
# "The", "falafal", "was", "rather", "over", "cooked", "and", "dried", "but", "the", "chicken", "was", "fine", "."
# path = "apetizers_LSTM_test.pdf"
path = "lap.pdf"
store_heat(df_data, path)

# laptop  "Windows", "8",
# "Did", "not", "enjoy", "the", "new", "Windows", "8", "and", "touchscreen", "functions", "."
# ian: [0.10941303966872566, 0.06675137227277891, 0.26513577533736316, 0.14250403912046036, 0.2665980937330909, 0.1795020334053944, 0.09009606477992979, 1.0, 0.14969216971003502, 0.04275923216208743, 0.005418159672907555]
# [0.2829668547339501, 1.0, 0.47965005517391174, 0.14722584152444954, 0.14329968991280415, 0.1999041455203833, 0.13058564715668716, 0.18967331846068194, 0.12580560147859535, 0.17287671302147148, 0.09242934321213285],
# [0.3586615390659111, 1.0, 0.39603833231349644, 0.14862131165751924, 0.3083891498224438, 0.25585973986195415, 0.3535839764434099, 0.37299910747256404, 0.0928281718052716, 0.3426310370982561, 0.1458519615582159, 0.15643532374995378, 0.27146379797366293]
# [0.4905776985968751, 0.8475043527496933, 1.0, 0.47535415957181026, 0.4824968053745386, 0.49437198126052695, 0.4590516149104332, 0.47739929272349263, 0.44845538798156837, 0.39890764659411126, 0.4781852522962833]

# rest "food"
#  "Great", "food", "but", "the", "service", "was", "dreadful", "!"
# ian\cdt\ssdgcn: [0.087, 0.093, 0.61, 0.37, 1, 0.58, 0.44, 0.25], [0.43, 0.38, 0.29, 0.035, 0.15, 0.31, 1, 0.22]
# [1.0, 0.9574412895321494, 0.03889686737982833, 0.025466116472337274, 0.06203616128637447, 0.032924724964377775, 0.04673269193699222, 0.027164439838735604]